use TimerIO, CountUp, CountDown

switchmodule Timer {
  in   button(ButtonPressed(False,False,False)) : ButtonPressed,
       pulse1s(False) : Bool
  out  mode(Up)    : Mode,
       display(Display(0,0,0)) : Display
  init CountUp

  state CountUp {
    new countUp = CountUp <- button, pulse1s

    output node mode = Up

    output node display = countUp.count

    switch :
      if countUp.next then CountDown else Retain
  }

  state CountDown {
    new countDown = CountDown <- button, pulse1s

    output node mode = Down

    output node display = countDown.count

    switch :
      if countDown.next then CountUp else Retain
  }
}
